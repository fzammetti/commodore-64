10 SYS9*4096
20 .CODE 0
30 SEI:LDA #<IRQ:LDX #>IRQ:STA $0314:STX $0315
40 LDA #$1B:STA $D011
50 LDA #$01:STA $D019:STA $D01A
60 LDA #$7F:STA $DC0D
70 LDA #$4A:STA $D012
80 CLI:RTS
90 ;
95 LTEMP .BYTE $00
100 IRQ LDA #$01:STA $D019
110 LDA #$4A:STA $D012:LDA DTEMP:NOP:NOP:NOP:STA $D020
120 LDX #$00:JSR TMC:LDY #$01
130 FLOOP LDA DTEMP,Y:STA $D020
140 LDX #$06:JSR TMC
150 INY:CPY #$10:BNE FLOOP
160 LDX #$00:JSR TMC:LDA #$00:STA $D020:STA $D021
170 INC LTEMP:LDA LTEMP:CMP #$03:BEQ DOIT:JMP $EA31
180 DOIT LDA #$00:STA LTEMP:JSR FLIPEM:JMP $EA31
1000 TMC DEX:BPL TMC:NOP:RTS
2000 DTEMP .BYTE $00,$00,$00,$00,$00,$00,$00,$00
2002 .BYTE $0,$0,$0,$0,$0,$0,$0,$0
2003 BRK
2500 ;
2600 DIR .BYTE $00
2800 POS .BYTE $01
3000 FLIPEM LDA DIR:CMP #$01:BNE DOWN:JMP UP
3002 DOWN LDX #$00:LDA #$01:DEPT STA DTEMP,X:CPX POS:BEQ DONE1:INX:JMP DEPT
3003 DONE1 LDX POS:LDA #$00:FRANKS STA DTEMP,X:CPX #$10:BEQ SESS:INX:JMP FRANKS
3004 SESS NOP
3005 INC POS:LDA POS:CMP #$10:BEQ DIRSET:RTS
3006 DIRSET LDA #$01:STA DIR:RTS
3010 UP LDX #$00:LDA #$01:DEPY STA DTEMP,X:CPX POS:BEQ DONE2:INX:JMP DEPY
3011 DONE2 LDX POS:LDA #$00:FRANKZ STA DTEMP,X:CPX #$10:BEQ SEZZ:INX:JMP FRANKZ
3012 SEZZ NOP
3013 DEC POS:LDA POS:CMP #$01:BEQ DIRSEY:RTS
3015 DIRSEY LDA #$00:STA DIR:RTS