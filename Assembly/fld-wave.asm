10 SYS9*4096
12 .CODE 0
14 *=$C000
200 SEI:LDA #<IRQ1:LDX #>IRQ1:STA $0314:STX $0315
201 LDA #$1B:STA $D011
202 LDA #$01:STA $D019:STA $D01A
203 LDA #$7F:STA $DC0D
204 LDA #$6A:STA $D012
205 CLI:RTS
218 IRQ1 LDA #$01:STA $D019
220 LDX #$00
222 LDA $D012:CMP #$00:BNE IRQ2
224 LDA #$6A:STA $D012
226 LDA #$1B:STA $D011
228 JMP $EA81
232 IRQ2 LDX #$00
234 LOOP1 LDA COLS,X:STA $D020
236 LDY TABLE,X:BEQ IRQ3
238 LOOP2 LDA $D012
240 LOOP3 CMP $D012:BEQ LOOP3
242 AND #$07:ORA #$10:STA $D011:DEY:BNE LOOP2
246 IRQ3 LDY #$08
248 LOOP4 LDA $D012
250 LOOP5 CMP $D012
252 BEQ LOOP5:DEY:BNE LOOP4
256 INX:CPX #$08
258 BNE LOOP1
259 NOP:NOP:NOP:LDX #$05:SLOW DEX:BPL SLOW:NOP:NOP:NOP
260 LDA #$1B:STA $D011:LDA #$00:STA $D020
266 JSR ROT:JMP $EA31
272 TABLE .BYTE $0,$1,$2,$3,$4,$5,$6,$7,$8,$7,$6,$5,$4,$3,$2,$1
276 ROT LDA CHIME:CMP #$03:BEQ TITY:INC CHIME:RTS:TITY LDA #$00:STA CHIME
277 LDA TABLE:STA FTEMP
278 LDY #$00:STY TIME
280 ALOOC LDA TABLE+1,Y:STA TABLE,Y
282 INY:CPY #$10:BNE ALOOC
284 LDA FTEMP:STA TABLE+15:RTS
286 CHIME .BYTE $00
288 TIME .BYTE $00
292 COLS .BYTE $0,$2,$3,$7,$5,$7,$3,$2
294 FTEMP .BYTE $00