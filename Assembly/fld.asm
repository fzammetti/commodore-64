10 SYS9*4096
11 .CODE 0
12 *=$C000
20 SEI:LDA #$01:STA $D019:STA $D01A
22 LDA #$7F:STA $DC0D:LDA #$1B:STA $D011
24 LDA #<IRQ1:LDX #>IRQ1
26 STA $0314:STX $0315
28 CLI:RTS
29 ;
30 IRQ1 LDA #$01:STA $D019
32 LDA $D012:CMP #$00:BNE IRQ2
36 LDA #$32:STA $D012
38 JMP $EA81
39 ;
40 IRQ2 LDX #$00
42 LOOP1 LDY TABLE,X:BEQ IRQ3
44 LOOP2 LDA $D012
46 LOOP3 CMP $D012:BEQ LOOP3
48 AND #$07:ORA #$10:STA $D011:DEY:BNE LOOP2
49 ;
50 IRQ3 LDY #$08
52 LOOP4 LDA $D012
54 LOOP5 CMP $D012
56 BEQ LOOP5:DEY:BNE LOOP4
58 ;
60 INX:CPX #$08
62 BNE LOOP1
65 ;
70 LDA #$00:STA $D012
72 LDA #$01:STA $D019
73 LDA TIME:CMP #$04:BEQ FRANK:INC TIME:JMP $EA31
74 FRANK JSR ROT:JMP $EA31
76 ;
80 TABLE .BYTE $0,$1,$2,$3,$4,$3,$2,$1
85 ;
90 ROT LDA TABLE:STA FTEMP
92 LDY #$00:STY TIME
94 ALOOP LDA TABLE+1,Y:STA TABLE,Y
95 INY:CPY #$08:BNE ALOOP
96 LDA FTEMP:STA TABLE+7:RTS
97 ;
98 TIME .BYTE $00
99 FTEMP .BYTE $00