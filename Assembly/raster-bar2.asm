10 SYS9*4096
20 .CODE 0
30 SEI:LDA #<IRQ:LDX #>IRQ:STA $0314:STX $0315
40 LDA #$1B:STA $D011
50 LDA #$01:STA $D019:STA $D01A
60 LDA #$7F:STA $DC0D
70 LDA #$52:STA $D012
80 CLI:RTS
90 ;
95 LTEMP .BYTE $00
100 IRQ LDA #$01:STA $D019
110 LDA #$52:STA $D012:LDA DTEMP
111 NOP:NOP:NOP:NOP:NOP
120 STA $D020:STA $D021:LDX #$00:JSR TMC:LDY #$01
130 FLOOP LDA DTEMP,Y:STA $D020:STA $D021
140 LDX #$20:JSR TMC
150 INY:CPY #$28:BNE FLOOP
160 LDX #$00:JSR TMC:LDA #$00:STA $D020:STA $D021
170 INC LTEMP:LDA LTEMP:CMP #$03:BEQ DOIT:JMP $EA31
180 DOIT LDA #$00:STA LTEMP:JSR FLIPEM:JSR IMPOSE:JMP $EA31
1000 TMC DEX:BPL TMC:NOP:RTS
2000 DTEMP .BYTE $00,$00,$00,$00,$00,$00,$00,$00
2001 .BYTE $00,$00,$00,$00,$00,$00,$00,$00
2002 .BYTE $00,$00,$00,$00,$00,$00,$00,$00
2003 .BYTE $00,$00,$00,$00,$00,$00,$00,$00
2004 .BYTE $00,$00,$00,$00,$00,$00,$00,$00
2500 ;
3000 FLIPEM LDA DIR:CMP #$01:BEQ UP:JMP DOWN
3002 UP LDA DATA:STA FTEMP:LDY #$00
3004 ALOA LDA DATA+1,Y:STA DATA,Y:INY
3005 CPY #$28:BNE ALOA:LDA FTEMP
3006 STA DATA+39:JMP CHECK
3010 DOWN LDA DATA+39:STA FTEMP
3011 LDY #$26
3012 ALOB LDA DATA,Y:STA DATA+1,Y:DEY
3014 CPY #$FF:BNE ALOB:LDA FTEMP
3015 STA DATA
3020 CHECK INC CHKTEMP
3022 LDA CHKTEMP:CMP #$20:BEQ CHANGE
3024 RTS
3030 CHANGE LDA DIR:CMP #$01:BEQ ZERSET:LDA #$01:STA DIR:JMP CHANGE1
3032 ZERSET LDA #$00:STA DIR
3035 CHANGE1 LDA #$00:STA CHKTEMP:RTS
3050 IMPOSE JMP REXX:LIPS LDA DIR:CMP #$00:BEQ OVER:JMP UNDER
3052 OVER JSR RESDAT:JSR SETDAT:RTS
3054 UNDER JSR SETDAT:JSR RESDAT:RTS
3060 RESDAT LDX #$00:FRET1 NOP
3062 LDA RESETDATA,X:CMP #$FF:BEQ CONT1
3064 STA DTEMP,X
3066 CONT1 INX:CPX #$20:BNE FRET1
3068 RTS
3070 SETDAT LDX #$00:FRET2 NOP
3072 LDA DATA,X:CMP #$FF:BEQ CONT2
3074 STA DTEMP,X
3076 CONT2 INX:CPX #$28:BNE FRET2
3078 RTS
3080 REXX LDX #$00:LDA #$00:LOPY STA DTEMP,X:INX:CPX #$28:BNE LOPY:JMP LIPS
3090 REXDAT .BYTE $00,$00,$00,$00,$00,$00,$00,$00
3091 .BYTE $00,$00,$00,$00,$00,$00,$00,$00
3092 .BYTE $00,$00,$00,$00,$00,$00,$00,$00
3093 .BYTE $00,$00,$00,$00,$00,$00,$00,$00
3094 .BYTE $00,$00,$00,$00,$00,$00,$00,$00
3100 FTEMP .BYTE $00
3150 DIR .BYTE $01
3175 CHKTEMP .BYTE $00
3200 RESETDATA .BYTE $FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF
3201 .BYTE $0B,$09,$09,$09,$02,$02,$02,$08
3202 .BYTE $08,$0A,$07,$01,$01,$07,$0A,$08
3203 .BYTE $08,$02,$02,$02,$09,$09,$09,$0B
3204 .BYTE $FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF
3300 DATA .BYTE $FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF
3301 .BYTE $FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF
3302 .BYTE $FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF
3303 .BYTE $FF,$FF,$FF,$FF,$FF,$FF,$FF,$FF
3304 .BYTE $06,$0E,$03,$01,$01,$03,$0E,$06